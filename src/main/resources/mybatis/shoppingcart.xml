<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.mvc.shoppingcart.ShoppingcartDAOInter">
	<insert id="add_cart"
		parameterType="dev.mvc.shoppingcart.ShoppingcartVO">
		insert into shoppingcart (scno, rno, count, rdate,
		menuno, mno )
		values (shoppingcart_seq.nextval, #{rno }, #{count },
		sysdate, #{menuno }, #{mno })

	</insert>

	<select id="show_cart" parameterType="int"
		resultType="dev.mvc.shoppingcart.Menu_Memeber_Shoppingcart_VO">

		select n.rno, n.menuno, n.title, n.explanation,
		n.spiciness, n.file1, n.thumb,
		n.price, t.rdate , t.mno
		from menu n, shoppingcart
		t, members m
		where n.rno = t.rno and m.mno = t.mno and t.menuno =
		n.menuno and m.mno =#{mno }
	</select>

	<select id="cart_count" parameterType="int" resultType="int">
		select
		count(n.menuno)
		from menu n, shoppingcart t, members m
		where
		n.rno =
		t.rno and m.mno = t.mno and t.menuno = n.menuno and m.mno =#{mno }
	</select>

	<select id="cart_sum" parameterType="int" resultType="int">
		select
		sum(n.price)
		from menu n, shoppingcart t, members m
		where
		n.rno = t.rno
		and m.mno = t.mno and t.menuno = n.menuno and m.mno =#{mno }
	</select>




</mapper>